<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.2</version>
    <date>2023-02-27T19:09:58Z</date>
    <groups>
        <group>
            <name>Templates</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>zbx_netapp_santricity_web_api</template>
            <name>zbx_netapp_santricity_web_api</name>
            <description>Created by Rayg00nchik

Pay attention to macros values.
Fill the username, password and scheme to successfully receive the data.
If you have more than one system storage ID - just create separate host, link this template to new host and set new macros {$SYSTEM_ID}
To determine how many systems id's you have check the result of item &quot;Storage Systems ID Numbers&quot; Default ID = 1</description>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Storage About Info</name>
                </application>
                <application>
                    <name>Storage Admin Password Status</name>
                </application>
                <application>
                    <name>Storage Analysed Controller Statistics</name>
                </application>
                <application>
                    <name>Storage Analysed Volume Statistics</name>
                </application>
                <application>
                    <name>Storage Controllers</name>
                </application>
                <application>
                    <name>Storage Controller Statistics</name>
                </application>
                <application>
                    <name>Storage Drives</name>
                </application>
                <application>
                    <name>Storage Drives Temperature</name>
                </application>
                <application>
                    <name>Storage Firmware</name>
                </application>
                <application>
                    <name>Storage Firmware Drives</name>
                </application>
                <application>
                    <name>Storage Hot Spare Drives</name>
                </application>
                <application>
                    <name>Storage Lockdown Status</name>
                </application>
                <application>
                    <name>Storage Pools</name>
                </application>
                <application>
                    <name>Storage System Analysed Statistics</name>
                </application>
                <application>
                    <name>Storage Systems Config</name>
                </application>
                <application>
                    <name>Storage Systems ID</name>
                </application>
                <application>
                    <name>Storage Volume Groups</name>
                </application>
                <application>
                    <name>Storage Volumes</name>
                </application>
                <application>
                    <name>Zabbix raw items</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>SANtricity: Get Storage Systems ID</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems</key>
                    <delay>15m</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect system ID numbers information (raw data)</description>
                    <applications>
                        <application>
                            <name>Storage Systems ID</name>
                        </application>
                    </applications>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(1800)}=1</expression>
                            <name>No Data Retrieved &quot;Storage Systems ID&quot; in last 30 minutes for {HOST.DNS}</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Storage System ID № &quot;{$SYSTEM_ID}&quot; Certificate Status</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.certificate.status.id.[{$SYSTEM_ID}]</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Get the certificate status (https)</description>
                    <applications>
                        <application>
                            <name>Storage Systems ID</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(?&lt;=&quot;id&quot;:&quot;{$SYSTEM_ID}&quot;,).*</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(?&lt;=&quot;certificateStatus&quot;:&quot;)(.*?)(?=\&quot;)</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>santricity.storage.systems</key>
                    </master_item>
                </item>
                <item>
                    <name>SANtricity: Get Storage About Information</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.about</key>
                    <delay>30m</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect additional information (raw data)</description>
                    <applications>
                        <application>
                            <name>Storage About Info</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   return('[' + value + ']') //making an array</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/about</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(3600)}=1</expression>
                            <name>No Data Retrieved &quot;About Information&quot; for ID № &quot;{$SYSTEM_ID}&quot; in last 60 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SANtricity: Get Storage Admin Password Set Status</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.admin.password.status</key>
                    <delay>30m</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect admin password status information (raw data)</description>
                    <applications>
                        <application>
                            <name>Storage Admin Password Status</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(?&lt;=&quot;adminPasswordSet&quot;:)(.*?)(?=,)</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/passwords</url>
                    <triggers>
                        <trigger>
                            <expression>{str(true,#1)}=0</expression>
                            <name>Admin Password Not Set for ID № &quot;{$SYSTEM_ID}&quot;</name>
                            <priority>AVERAGE</priority>
                            <description>Set Admin Password Please</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                        <trigger>
                            <expression>{nodata(3600)}=1</expression>
                            <name>No Data Retrieved &quot;Admin Password Set Status&quot; for ID № &quot;{$SYSTEM_ID}&quot; in last 60 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SANtricity: Get Storage Analysed System Statistics</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.analysed.statstics</key>
                    <delay>5m</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect analysed system information (raw data)

Statistics generation frequency is about 5 minutes 
Cannot be got frequently than 5 minutes - getting values will be the same</description>
                    <applications>
                        <application>
                            <name>Storage System Analysed Statistics</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   return('[' + value + ']') //making an array</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/analysed-system-statistics</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(900)}=1</expression>
                            <name>No Data Retrieved &quot;Analysed System Statistics&quot; for ID № &quot;{$SYSTEM_ID}&quot; in last 15 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SANtricity: Get Storage Analysed Volume Statistics</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                    <delay>5m</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect analysed volumes information (raw data)

Statistics generation frequency is about 5 minutes 
Cannot be got frequently than 5 minutes - getting values will be the same</description>
                    <applications>
                        <application>
                            <name>Storage Analysed Volume Statistics</name>
                        </application>
                    </applications>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/analysed-volume-statistics</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(2700)}=1</expression>
                            <name>No Data Retrieved &quot;Analysed Volume Statistics&quot; for ID № &quot;{$SYSTEM_ID}&quot; in last 45 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SANtricity: Get Storage Analysed Controller Statistics</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                    <delay>5m</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect analysed controllers information (raw data)

Statistics generation frequency is about 5 minutes 
Cannot be got frequently than 5 minutes - getting values will be the same</description>
                    <applications>
                        <application>
                            <name>Storage Analysed Controller Statistics</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   return('[' + value + ']') //making an array</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/analyzed/controller-statistics?statisticsFetchTime=1</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(900)}=1</expression>
                            <name>No Data Retrieved &quot;Analysed Controller Statistics&quot;  for ID № &quot;{$SYSTEM_ID}&quot; in last 15 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SANtricity: Get Storage Controllers</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.controllers</key>
                    <delay>15m</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect controllers information (raw data)</description>
                    <applications>
                        <application>
                            <name>Storage Controllers</name>
                        </application>
                    </applications>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/controllers</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(2700)}=1</expression>
                            <name>No Data Retrieved &quot;Storage Controllers&quot;  for ID № &quot;{$SYSTEM_ID}&quot; in last 45 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SANtricity: Get Storage Drives Temperature</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.diagnostic.temperature</key>
                    <delay>5m</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect drives temperature information (raw data)</description>
                    <applications>
                        <application>
                            <name>Storage Drives Temperature</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   return('[' + value + ']') //making an array</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/diagnostic-data/temperature-information</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(600)}=1</expression>
                            <name>No Data Retrieved &quot;Storage Drives Temperature&quot; for ID № &quot;{$SYSTEM_ID}&quot; in last 10 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SANtricity: Get Storage Drives</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.drives</key>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect drives  information (raw data)</description>
                    <applications>
                        <application>
                            <name>Storage Drives</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/(?=&quot;protectionInformationCapabilities&quot;:)(.*?)},(?=&quot;)/g, '');  // delete some unused strings to fit into 65535 bytes
   return(json_data);
</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/drives</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(600)}=1</expression>
                            <name>No Data Retrieved &quot;Storage Drives&quot;  for ID № &quot;{$SYSTEM_ID}&quot; in last 10 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SANtricity: Get Storage Firmware</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.firmware</key>
                    <delay>1h</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect firmware information (raw data)</description>
                    <applications>
                        <application>
                            <name>Storage Firmware</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   return('[' + value + ']')</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/firmware/embedded-firmware/{$SYSTEM_ID}/versions</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(7200)}=1</expression>
                            <name>No Data Retrieved &quot;Storage Firmware&quot;  for ID № &quot;{$SYSTEM_ID}&quot; in last 2 hours</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SANtricity: Get Storage Hot Spare Drives</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.hotspare</key>
                    <delay>5m</delay>
                    <history>1h</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect hot spare drives information (raw data)</description>
                    <applications>
                        <application>
                            <name>Storage Hot Spare Drives</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   return('[' + value + ']') //making an array</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$..hotSpareDriveCoverage.[*]</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/hot-spares</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(900)}=1</expression>
                            <name>No Data Retrieved &quot;Storage Hot Spare Drives&quot; for ID № &quot;{$SYSTEM_ID}&quot; in last 15 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>SANtricity: Get Storage Lockdown Status</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.lockdown.status</key>
                    <delay>15m</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>True if the storage system is in lockdown mode</description>
                    <applications>
                        <application>
                            <name>Storage Lockdown Status</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(?&lt;=&quot;isLockdown&quot;:)(.*?)(?=,)</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/lockdownstatus</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(1800)}=1</expression>
                            <name>No Data Retrieved &quot;Storage Lockdown Status&quot; for ID № &quot;{$SYSTEM_ID}&quot; in last 30 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Storage System ID № &quot;{$SYSTEM_ID}&quot; Password Set</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.password.set.[{$SYSTEM_ID}]</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Get the password set status</description>
                    <applications>
                        <application>
                            <name>Storage Systems ID</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(?&lt;=&quot;id&quot;:&quot;{$SYSTEM_ID}&quot;,).*</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(?&lt;=&quot;passwordSet&quot;:)(.*?)(?=,)</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>santricity.storage.systems</key>
                    </master_item>
                </item>
                <item>
                    <name>Storage System ID № &quot;{$SYSTEM_ID}&quot; Password Status</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.password.status.[{$SYSTEM_ID}]</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Get the password status</description>
                    <applications>
                        <application>
                            <name>Storage Systems ID</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(?&lt;=&quot;id&quot;:&quot;{$SYSTEM_ID}&quot;,).*</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(?&lt;=&quot;passwordStatus&quot;:&quot;)(.*?)(?=\&quot;)</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>santricity.storage.systems</key>
                    </master_item>
                </item>
                <item>
                    <name>Storage System ID № &quot;{$SYSTEM_ID}&quot; Status</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.status.[{$SYSTEM_ID}]</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Get the overall system status</description>
                    <applications>
                        <application>
                            <name>Storage Systems ID</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(?&lt;=&quot;id&quot;:&quot;{$SYSTEM_ID}&quot;,).*</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>(?&lt;=&quot;status&quot;:&quot;)(.*?)(?=\&quot;)</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>santricity.storage.systems</key>
                    </master_item>
                </item>
                <item>
                    <name>SANtricity: Get Storage Systems Config for ID № &quot;{$SYSTEM_ID}&quot;</name>
                    <type>HTTP_AGENT</type>
                    <key>santricity.storage.systems.id.system.config.[{$SYSTEM_ID}]</key>
                    <delay>15m</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <authtype>BASIC</authtype>
                    <username>{$SANTRICITY.USERNAME}</username>
                    <password>{$SANTRICITY.PASSWORD}</password>
                    <description>Main item to collect system ID &quot;{$SYSTEM_ID}&quot;  information (raw data)</description>
                    <applications>
                        <application>
                            <name>Storage Systems Config</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   return('[' + value + ']') //making an array</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <timeout>7s</timeout>
                    <url>{$SANTRICITY.SCHEME}://{HOST.DNS}/devmgr/v2/storage-systems/{$SYSTEM_ID}/system-config</url>
                    <triggers>
                        <trigger>
                            <expression>{nodata(1800)}=1</expression>
                            <name>No Data Retrieved &quot;Storage Systems Config for ID № &quot;{$SYSTEM_ID}&quot;&quot;  in last 30 minutes</name>
                            <priority>HIGH</priority>
                            <description>Check the access to http or https</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Storage Systems ID Numbers</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.numbers</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Get the numbers ID of systems</description>
                    <applications>
                        <application>
                            <name>Storage Systems ID</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.[*].length()</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>santricity.storage.systems</key>
                    </master_item>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>Storage About Information</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.about.discovery</key>
                    <delay>0</delay>
                    <description>Additional Information</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Name &quot;{#NAME}&quot; Serial Number</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.about.[{#NAME},serialNumber]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage About Info</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?=&quot;name&quot;:&quot;{#NAME}&quot;).*(?&lt;=controllerPosition&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;serialNumber&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.about</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.about</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } );     // all letters to Capital ones
   json_data = json_data.replace(/&quot;:/g,'}&quot;:' );              // making an array
   
   json_data = json_data.replace(/,&quot;(?=[A-Z])/g, ',&quot;{#');    // making an array 
   json_data = json_data.replace(/{&quot;(?=[A-Z])/g, '{&quot;{#');    // making an array
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Analysed Controller Statistics</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.analysed.controller.statistics.discovery</key>
                    <delay>0</delay>
                    <description>Analyzed Controllers Statistics - collected every 5 minutes by the system itself - check observed time item values</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; cpuAvgUtilizationPerCore</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},cpuAvgUtilizationPerCore]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <description>The average percentage of CPU core utilization</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;cpuAvgUtilizationPerCore&quot;:\[)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{min(#4)}&gt;={$HIGH_CPU_AVG_UTILIZATION_CONTROLLER}</expression>
                                    <name>Storage Controller &quot;{#CONTROLLERID}&quot; High CPU Avg Utilization (&gt;{$HIGH_CPU_AVG_UTILIZATION_CONTROLLER}%) for the last 20 minutes</name>
                                    <priority>HIGH</priority>
                                    <dependencies>
                                        <dependency>
                                            <name>Storage Controller &quot;{#CONTROLLERID}&quot; Warning CPU Avg Utilization (&gt;{$WARN_CPU_AVG_UTILIZATION_CONTROLLER}%) for the last 20 minutes</name>
                                            <expression>{zbx_netapp_santricity_web_api:santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},cpuAvgUtilizationPerCore].min(#4)}&gt;={$WARN_CPU_AVG_UTILIZATION_CONTROLLER}</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{min(#4)}&gt;={$WARN_CPU_AVG_UTILIZATION_CONTROLLER}</expression>
                                    <name>Storage Controller &quot;{#CONTROLLERID}&quot; Warning CPU Avg Utilization (&gt;{$WARN_CPU_AVG_UTILIZATION_CONTROLLER}%) for the last 20 minutes</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; maxCpuUtilization</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},maxCpuUtilization]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <description>The max cpu utilization over the observation period</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;maxCpuUtilization&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{min(#4)}&gt;={$HIGH_CPU_MAX_UTILIZATION_CONTROLLER}</expression>
                                    <name>Storage Controller &quot;{#CONTROLLERID}&quot; High CPU Utilization (&gt;{$HIGH_CPU_MAX_UTILIZATION_CONTROLLER}) for the last 20 minutes</name>
                                    <priority>HIGH</priority>
                                    <dependencies>
                                        <dependency>
                                            <name>Storage Controller &quot;{#CONTROLLERID}&quot; Warning CPU Utilization (&gt;{$WARN_CPU_MAX_UTILIZATION_CONTROLLER}) for the last 20 minutes</name>
                                            <expression>{zbx_netapp_santricity_web_api:santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},maxCpuUtilization].min(#4)}&gt;={$WARN_CPU_MAX_UTILIZATION_CONTROLLER}</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{min(#4)}&gt;={$WARN_CPU_MAX_UTILIZATION_CONTROLLER}</expression>
                                    <name>Storage Controller &quot;{#CONTROLLERID}&quot; Warning CPU Utilization (&gt;{$WARN_CPU_MAX_UTILIZATION_CONTROLLER}) for the last 20 minutes</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; maxPossibleBpsUnderCurrentLoad</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},maxPossibleBpsUnderCurrentLoad]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>B</units>
                            <description>Theoretical maximum possible Bytes per second under current load.</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;maxPossibleBpsUnderCurrentLoad&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; maxPossibleIopsUnderCurrentLoad (IOps)</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},maxPossibleIopsUnderCurrentLoad]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Theoretical maximum possible IO per second under current load</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;maxPossibleIopsUnderCurrentLoad&quot;:)(.*?)(?=})</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; observedTime</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},observedTime]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>A timestamp representing when the data was collected</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;observedTime&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <parameters>
                                        <parameter>T</parameter>
                                        <parameter><![CDATA[ ]]></parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>RTRIM</type>
                                    <parameters>
                                        <parameter>0+.</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; readHitResponseTime</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},readHitResponseTime]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>ms</units>
                            <description>Read cache hit response time average in milliseconds.</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readHitResponseTime&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; readIOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},readIOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Read operations per second.</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readIOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; readOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},readOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>The amount of read operations in this analysed interval.</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; readPhysicalIOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},readPhysicalIOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Physical read operations per second</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeThroughput&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; readResponseTime</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},readResponseTime]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>ms</units>
                            <description>Read response time average in milliseconds</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readResponseTime&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; readThroughput</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},readThroughput]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>MB/s</units>
                            <description>Read throughput in MB/s</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readThroughput&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; writeHitResponseTime</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},writeHitResponseTime]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>ms</units>
                            <description>Write cache hit response time average in milliseconds</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeHitResponseTime&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; writeIOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},writeIOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Write operations per second</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeIOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; writeOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},writeOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>The amount of write operations in this analysed interval.</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; writePhysicalIOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},writePhysicalIOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Physical write operations per second</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writePhysicalIOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; writeResponseTime</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},writeResponseTime]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>ms</units>
                            <description>Write response time average in milliseconds</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeResponseTime&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Controller &quot;{#CONTROLLERID}&quot; writeThroughput</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},writeThroughput]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>MB/s</units>
                            <description>Write throughput in MB/s</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Controller Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;controllerId&quot;:&quot;{#CONTROLLERID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeThroughput&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot; cpuAvgUtilizationPerCore %</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>43A047</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},cpuAvgUtilizationPerCore]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot; maxCpuUtilization %</name>
                            <percent_left>100</percent_left>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>80FF00</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},maxCpuUtilization]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot; maxPossibleBpsUnderCurrentLoad (Bytes)</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>1E88E5</color>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},maxPossibleBpsUnderCurrentLoad]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot; maxPossibleIopsUnderCurrentLoad</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>A1887F</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},maxPossibleIopsUnderCurrentLoad]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID  &quot;{#CONTROLLERID}&quot; readIOps</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>00ACC1</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},readIOps]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot; readPhysicalIOps</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>80DEEA</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},readPhysicalIOps]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot; readResponseTime  (milliseconds)</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>90A4AE</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},readResponseTime]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot; readThroughput (MB/s)</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>AB47BC</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},readThroughput]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot; writeIOps</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>F44336</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},writeIOps]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot; writePhysicalIOps</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>9CCC65</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},writePhysicalIOps]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot;  writeResponseTime (milliseconds)</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>A1887F</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},writeResponseTime]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Controller ID &quot;{#CONTROLLERID}&quot; writeThroughput (MB/s)</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>FF8000</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analyzed.controller.statistics.[{#CONTROLLERID},writeThroughput]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.analyzed.controller.statistics</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$..statistics[*]</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } );     // all letters to Capital ones
   json_data = json_data.replace(/&quot;:/g,'}&quot;:' );              // making an array
   json_data = json_data.replace(/,&quot;(?=[A-Z])/g, ',&quot;{#');    // making an array 
   json_data = json_data.replace(/{&quot;(?=[A-Z])/g, '{&quot;{#');    // making an array
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Analysed Statistics</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.analysed.statistics.discovery</key>
                    <delay>0</delay>
                    <description>Analyzed  System Statistics - collected every 5 minutes by the system itself - check observed time item values</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Storage Name &quot;{#STORAGESYSTEMNAME}&quot; maxCpuUtilization</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},maxCpuUtilization]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <description>The max cpu utilization over the observation period</description>
                            <applications>
                                <application>
                                    <name>Storage System Analysed Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;storageSystemName&quot;:&quot;{#STORAGESYSTEMNAME}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;maxCpuUtilization&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.statstics</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{min(#4)}&gt;={$HIGH_CPU_MAX_UTILIZATION_SYSTEM}</expression>
                                    <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; High CPU Utilization (&gt;{$HIGH_CPU_MAX_UTILIZATION_SYSTEM}%) for the last 20 minutes</name>
                                    <priority>HIGH</priority>
                                    <dependencies>
                                        <dependency>
                                            <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; Warning CPU Utilization (&gt;{$WARN_CPU_MAX_UTILIZATION_SYSTEM}%) for the last 20 minutes</name>
                                            <expression>{zbx_netapp_santricity_web_api:santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},maxCpuUtilization].min(#4)}&gt;={$WARN_CPU_MAX_UTILIZATION_SYSTEM}</expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{min(#4)}&gt;={$WARN_CPU_MAX_UTILIZATION_SYSTEM}</expression>
                                    <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; Warning CPU Utilization (&gt;{$WARN_CPU_MAX_UTILIZATION_SYSTEM}%) for the last 20 minutes</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Storage Name &quot;{#STORAGESYSTEMNAME}&quot; observedTime</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},observedTime]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>A timestamp representing when the data was collected</description>
                            <applications>
                                <application>
                                    <name>Storage System Analysed Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;storageSystemName&quot;:&quot;{#STORAGESYSTEMNAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;observedTime&quot;:&quot;)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=observedTime&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <parameters>
                                        <parameter>T</parameter>
                                        <parameter><![CDATA[ ]]></parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>RTRIM</type>
                                    <parameters>
                                        <parameter>0+.</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.statstics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Storage Name &quot;{#STORAGESYSTEMNAME}&quot; readIOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},readIOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Read operations per second.</description>
                            <applications>
                                <application>
                                    <name>Storage System Analysed Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;storageSystemName&quot;:&quot;{#STORAGESYSTEMNAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;observedTime&quot;:&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readIOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.statstics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Storage Name &quot;{#STORAGESYSTEMNAME}&quot; readPhysicalIOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},readPhysicalIOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Physical read operations per second.</description>
                            <applications>
                                <application>
                                    <name>Storage System Analysed Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;storageSystemName&quot;:&quot;{#STORAGESYSTEMNAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;observedTime&quot;:&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readPhysicalIOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.statstics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Storage Name &quot;{#STORAGESYSTEMNAME}&quot; readResponseTime</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},readResponseTimet]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>ms</units>
                            <description>Read response time average in milliseconds.</description>
                            <applications>
                                <application>
                                    <name>Storage System Analysed Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;storageSystemName&quot;:&quot;{#STORAGESYSTEMNAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;observedTime&quot;:&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readResponseTime&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.statstics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Storage Name &quot;{#STORAGESYSTEMNAME}&quot; readThroughput</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},readThroughput]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>MB/s</units>
                            <description>Read throughput in MB/s.</description>
                            <applications>
                                <application>
                                    <name>Storage System Analysed Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;storageSystemName&quot;:&quot;{#STORAGESYSTEMNAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;observedTime&quot;:&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readThroughput&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.statstics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Storage Name &quot;{#STORAGESYSTEMNAME}&quot; writeIOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},writeIOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Write operations per second.</description>
                            <applications>
                                <application>
                                    <name>Storage System Analysed Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;storageSystemName&quot;:&quot;{#STORAGESYSTEMNAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;observedTime&quot;:&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeIOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.statstics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Storage Name &quot;{#STORAGESYSTEMNAME}&quot; writePhysicalIOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},writePhysicalIOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Physical write operations per second.</description>
                            <applications>
                                <application>
                                    <name>Storage System Analysed Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;storageSystemName&quot;:&quot;{#STORAGESYSTEMNAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;observedTime&quot;:&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writePhysicalIOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.statstics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Storage Name &quot;{#STORAGESYSTEMNAME}&quot; writeResponseTime</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},writeResponseTime]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>ms</units>
                            <description>Write response time average in milliseconds.</description>
                            <applications>
                                <application>
                                    <name>Storage System Analysed Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;storageSystemName&quot;:&quot;{#STORAGESYSTEMNAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;observedTime&quot;:&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeResponseTime&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.statstics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Storage Name &quot;{#STORAGESYSTEMNAME}&quot; writeThroughput</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},writeThroughput]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>MB/s</units>
                            <description>Write throughput in MB/s.</description>
                            <applications>
                                <application>
                                    <name>Storage System Analysed Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;storageSystemName&quot;:&quot;{#STORAGESYSTEMNAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;observedTime&quot;:&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeThroughput&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.statstics</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; maxCpuUtilization %</name>
                            <percent_left>100</percent_left>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>80FF00</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},maxCpuUtilization]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; readIOps</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>00ACC1</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},readIOps]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; readPhysicalIOps</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>80DEEA</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},readPhysicalIOps]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; readResponseTime  (milliseconds)</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>90A4AE</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},readResponseTimet]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; readThroughput (MB/s)</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>AB47BC</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},readThroughput]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; writeIOps</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>F44336</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},writeIOps]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; writePhysicalIOps</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>9CCC65</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},writePhysicalIOps]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; writeResponseTime (milliseconds)</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>A1887F</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},writeResponseTime]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Name &quot;{#STORAGESYSTEMNAME}&quot; writeThroughput (MB/s)</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>FF8000</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.statstics.[{#STORAGESYSTEMNAME},writeThroughput]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.analysed.statstics</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } );     // all letters to Capital ones
   json_data = json_data.replace(/&quot;:/g,'}&quot;:' );              // making an array
   json_data = json_data.replace(/,&quot;(?=[A-Z])/g, ',&quot;{#');    // making an array 
   json_data = json_data.replace(/{&quot;(?=[A-Z])/g, '{&quot;{#');    // making an array
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Analysed Volume Statistics</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.analysed.volume.statistics.discovery</key>
                    <delay>0</delay>
                    <description>Analyzed Volume Statistics - collected every 5 minutes by the system itself - check observed time item values</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume &quot;{#VOLUMENAME}&quot; observedTime</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},observedTime]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>A timestamp representing when the data was collected</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Volume Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;volumeName&quot;:&quot;{#VOLUMENAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;observedTime&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <parameters>
                                        <parameter>T</parameter>
                                        <parameter><![CDATA[ ]]></parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>RTRIM</type>
                                    <parameters>
                                        <parameter>0+.</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume &quot;{#VOLUMENAME}&quot; readHitBytes</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},readHitBytes]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Number of bytes read from cache</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Volume Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;volumeName&quot;:&quot;{#VOLUMENAME}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readHitBytes&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume &quot;{#VOLUMENAME}&quot; readHitOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},readHitOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Number of read operations that hit cache</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Volume Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;volumeName&quot;:&quot;{#VOLUMENAME}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readHitOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume &quot;{#VOLUMENAME}&quot; readIOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},readIOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Read operations per second</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Volume Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;volumeName&quot;:&quot;{#VOLUMENAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;observedTime&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readIOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume &quot;{#VOLUMENAME}&quot; readOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},readOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>The amount of read operations in this analysed interval.</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Volume Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;volumeName&quot;:&quot;{#VOLUMENAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;observedTime&quot;:&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume &quot;{#VOLUMENAME}&quot; writeHitBytes</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},writeHitBytes]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <units>B</units>
                            <description>Number of bytes written to cache</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Volume Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;volumeName&quot;:&quot;{#VOLUMENAME}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeHitBytes&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume &quot;{#VOLUMENAME}&quot; writeHitOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},writeHitOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Number of write operations that hit cache</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Volume Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;volumeName&quot;:&quot;{#VOLUMENAME}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeHitOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume &quot;{#VOLUMENAME}&quot; writeIOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},writeIOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Write operations per second.</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Volume Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;volumeName&quot;:&quot;{#VOLUMENAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;observedTime&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeIOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume &quot;{#VOLUMENAME}&quot; writeOps</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},writeOps]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>The amount of write operations in this analysed interval.</description>
                            <applications>
                                <application>
                                    <name>Storage Analysed Volume Statistics</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?&lt;=&quot;volumeName&quot;:&quot;{#VOLUMENAME}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;observedTime&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeOps&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Storage Volume &quot;{#VOLUMENAME}&quot; readIOps</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>DCE775</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},readIOps]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Storage Volume &quot;{#VOLUMENAME}&quot; writeIOps</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>GRADIENT_LINE</drawtype>
                                    <color>1E88E5</color>
                                    <calc_fnc>ALL</calc_fnc>
                                    <item>
                                        <host>zbx_netapp_santricity_web_api</host>
                                        <key>santricity.storage.systems.id.analysed.volume.statistics.[{#VOLUMENAME},writeIOps]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.analysed.volume.statistics</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } );     // all letters to Capital ones
   json_data = json_data.replace(/&quot;:/g,'}&quot;:' );              // making an array
   json_data = json_data.replace(/,&quot;(?=[A-Z])/g, ',&quot;{#');    // making an array 
   json_data = json_data.replace(/{&quot;(?=[A-Z])/g, '{&quot;{#');    // making an array
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Controllers</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.controllers.discovery</key>
                    <delay>0</delay>
                    <description>Controllers Information</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; AppVersion</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},appVersion]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=,&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;active&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;appVersion&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; BoardID</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},boardID]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=,&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;active&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;boardID&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; BootVersion</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},bootVersion]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=,&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;active&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;bootVersion&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; Label</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},label]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=,&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;active&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;label&quot;:&quot;)\w(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; Location Position</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},location]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=,&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;active&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;locationPosition&quot;:)\d(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; OemPartNumber</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},oemPartNumber]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=,&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;active&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;oemPartNumber&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; PartNumber</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},partNumber]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=,&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(&quot;partNumber&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;partNumber&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; Ready to Remove</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},readyToRemove]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=,&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;active&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readyToRemove&quot;:)(\w+)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; Serial Number</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},serialNumber]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=,&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;active&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;serialNumber&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; Slot Number</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},slot]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=,&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;active&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;slot&quot;:)\d(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; Active</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},{#ACTIVE}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;active&quot;: )\w+(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(true,#1)}=0</expression>
                                    <name>Storage Controller &quot;{#ID}&quot; is not Active</name>
                                    <priority>HIGH</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Controller &quot;{#ID}&quot; Status</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.controllers.[{#ID},{#STATUS}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Storage Controllers</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?!.*&quot;status&quot;:)\w+(?=&quot;,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.controllers</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(optimal,#1)}=0</expression>
                                    <name>Storage Controller &quot;{#ID}&quot; Status is not Optimal</name>
                                    <priority>HIGH</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.controllers</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } );   // all letters to Capital ones 
   json_data = json_data.replace(/&quot;:/g,'}&quot;:' );                                              // making an array
   json_data = json_data.replace(/,&quot;(?=[A-Z])/g, ',&quot;{#');                                    // making an array
   json_data = json_data.replace(/{&quot;(?=[A-Z])/g, '{&quot;{#');                                    // making an array
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Drives Temperature</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.diagnostic.temperature.discovery</key>
                    <delay>0</delay>
                    <description>Drive Temperature Sensors</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive  &quot;{#ID}&quot;  Temperature</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.diagnostic.temperature.drive.[{#ID}]</key>
                            <delay>0</delay>
                            <description>in Celsius</description>
                            <applications>
                                <application>
                                    <name>Storage Drives Temperature</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;id&quot;:&quot;{#ID}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;currentTempInCelsius&quot;:)\d\d</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.diagnostic.temperature</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{min(#3)}&gt;={$TEMP_DRIVE_HIGH}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{min(#3)}&lt;={$TEMP_DRIVE_HIGH}</recovery_expression>
                                    <name>Drive  &quot;{#ID}&quot;  Temperature is too HIGH (&gt;{$TEMP_DRIVE_HIGH})</name>
                                    <priority>HIGH</priority>
                                    <description>Reference Temp is {#REFERENCETEMPINCELSIUS}</description>
                                    <manual_close>YES</manual_close>
                                    <dependencies>
                                        <dependency>
                                            <name>Drive  &quot;{#ID}&quot;  Temperature Warning (&gt;{$TEMP_DRIVE_WARN})</name>
                                            <expression>{zbx_netapp_santricity_web_api:santricity.storage.systems.id.diagnostic.temperature.drive.[{#ID}].min(#3)}&gt;={$TEMP_DRIVE_WARN}</expression>
                                            <recovery_expression>{zbx_netapp_santricity_web_api:santricity.storage.systems.id.diagnostic.temperature.drive.[{#ID}].min(#3)}&lt;={$TEMP_DRIVE_WARN}</recovery_expression>
                                        </dependency>
                                    </dependencies>
                                </trigger_prototype>
                                <trigger_prototype>
                                    <expression>{min(#3)}&gt;={$TEMP_DRIVE_WARN}</expression>
                                    <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
                                    <recovery_expression>{min(#3)}&lt;={$TEMP_DRIVE_WARN}</recovery_expression>
                                    <name>Drive  &quot;{#ID}&quot;  Temperature Warning (&gt;{$TEMP_DRIVE_WARN})</name>
                                    <priority>WARNING</priority>
                                    <description>Reference Temp is {#REFERENCETEMPINCELSIUS}</description>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.diagnostic.temperature</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$..DriveTemperatureInformationData</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } );    // all letters to Capital ones
   json_data = json_data.replace(/&quot;(?=[A-Z])/g,'&quot;{#');                                        // making an array
   json_data = json_data.replace(/&quot;(?=:)/g,'}&quot;' );                                            // making an array 
   json_data = json_data.replace(/\[(?=\[)/g,'' );                                            // making an array
   json_data = json_data.replace(/(\])(?!.*\1)/g,'' );                                        // making an array
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Drives</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.drives.discovery</key>
                    <delay>0</delay>
                    <description>Main Drive Information</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Current Speed</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},currentSpeed]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Current Speed</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;currentSpeed&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{diff()}&gt;0</expression>
                                    <name>Drive S/N &quot;{#SERIALNUMBER}&quot; Current Speed Has Changed</name>
                                    <priority>INFO</priority>
                                    <description>Drive ID: &quot;{#ID}&quot;</description>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Drive Type</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},driveMediaType]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Drive Type</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;driveMediaType&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Firmware Version</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},firmwareVersion]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Firmware Version</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;firmwareVersion&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Degraded Channel</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},hasDegradedChannel]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>True, if a path to this drive is degraded.</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;hasDegradedChannel&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(true,#1)}=1</expression>
                                    <name>Drive S/N &quot;{#SERIALNUMBER}&quot; Degraded Channel Detected</name>
                                    <priority>HIGH</priority>
                                    <description>Drive ID: {#ID}</description>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Hot Spare</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},hotSpare]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Hot Spare disk or not</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;hotSpare&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Invalid Drive Data</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},invalidDriveData]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>True if no drive information (serial #, capacity, etc.) can be obtained. This field is always true for missing drives.</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;invalidDriveData&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(true,#1)}=1</expression>
                                    <name>Drive S/N &quot;{#SERIALNUMBER}&quot; Invalid Drive Data Detected</name>
                                    <priority>HIGH</priority>
                                    <description>Drive ID: {#ID}</description>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Manufacture</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},manufacturer]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Manufacture</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;manufacturer&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Offline Status</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},offline]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Offline Status</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;offline&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(true,#1)}=1</expression>
                                    <name>Drive S/N &quot;{#SERIALNUMBER}&quot; is in Offline</name>
                                    <priority>HIGH</priority>
                                    <description>Drive ID: {#ID}</description>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Percent Endurance Used</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},percentEnduranceUsed]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Only percent life used is reported for this device.</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;percentEnduranceUsed&quot;:)(.*?)(?=})</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Product ID</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},productID]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Product ID</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;productID&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Serial Number</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},serialNumber]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Uniqe Serial Number</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;serialNumber&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Slot Position</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},slot]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>Slot Number</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(&quot;physicalLocation&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;label&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Spare Blocks Remaining Percent</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},spareBlocksRemainingPercent]</key>
                            <delay>0</delay>
                            <value_type>FLOAT</value_type>
                            <description>The percentage of spare blocks remaining in the solid state drive. Controller firmware checks and updates this percentage approximately once per hour.</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;spareBlocksRemainingPercent&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&lt;{$HIGH_SPARE_BLOCKS_REMAINING_PERCENT}</expression>
                                    <name>Drive S/N &quot;{#SERIALNUMBER}&quot; Spare Blocks Remaining Percent is &lt;{$HIGH_SPARE_BLOCKS_REMAINING_PERCENT}%</name>
                                    <priority>HIGH</priority>
                                    <description>Drive ID: {#ID}</description>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Status</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#ID},status]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Optimal Status</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;status&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(optimal,#1)}=0</expression>
                                    <name>Drive S/N &quot;{#SERIALNUMBER}&quot; Status is not Optimal</name>
                                    <priority>HIGH</priority>
                                    <description>Drive ID: {#ID}</description>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Drive &quot;{#ID}&quot; Usable Capacity</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.drives.[{#SERIALNUMBER},usableCapacity]</key>
                            <delay>0</delay>
                            <units>B</units>
                            <description>The usable capacity of the drive, in bytes, after accounting for any space that is reserved for use by the array controller for overhead information. This field is valid for missing drives.</description>
                            <applications>
                                <application>
                                    <name>Storage Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>.*(?=&quot;id&quot;:&quot;{#ID}&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>({&quot;offline&quot;)(?!.*\1).*[^]]</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;usableCapacity&quot;:&quot;)(.*?)(?=&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.drives</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.drives</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } );   // all letters to Capital ones
   json_data = json_data.replace(/&quot;:/g,'}&quot;:' );                                              // making an array
   json_data = json_data.replace(/,&quot;(?=[A-Z])/g, ',&quot;{#');                                    // making an array
   json_data = json_data.replace(/{&quot;(?=[A-Z])/g, '{&quot;{#');                                    // making an array
    return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Firmware</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.firmware.discovery</key>
                    <delay>0</delay>
                    <description>Firmware modules + versions information</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Firmware Module &quot;{#CODEMODULE}&quot; Version</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.firmware.module.[{{#CODEMODULE},{#VERSIONSTRING}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>System Module Version</description>
                            <applications>
                                <application>
                                    <name>Storage Firmware</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;codeModule&quot;:&quot;{#CODEMODULE}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;versionString&quot;:&quot;)(.*?)(?=\&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.firmware</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{diff()}&gt;0</expression>
                                    <name>Firmware Module &quot;{#CODEMODULE}&quot; Version has changed</name>
                                    <priority>INFO</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.firmware</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$..codeVersions</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } );  // all letters to Capital ones
   json_data = json_data.replace(/&quot;(?=[A-Z])/g,'&quot;{#');                                      // making an array   
   json_data = json_data.replace(/&quot;(?=:)/g,'}&quot;' );                                          // making an array
   json_data = json_data.replace(/\[(?=\[)/g,'' );                                          // making an array
   json_data = json_data.replace(/(\])(?!.*\1)/g,'' );                                      // making an array    
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Hot Spare Drives</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.hotspare.discovery</key>
                    <delay>0</delay>
                    <description>Hot Spare Drive information</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Hot Spare Drive ID &quot;{#DRIVEREF}&quot;  In Use</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.hotspare.[{#DRIVEREF},inUse]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>is in USE?</description>
                            <applications>
                                <application>
                                    <name>Storage Hot Spare Drives</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;driveRef&quot;:&quot;{#DRIVEREF}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;inUse&quot;:)(.*?)(?=,)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.hotspare</key>
                            </master_item>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{str(true,#1)}=1</expression>
                                    <name>Hot Spare Drive ID &quot;{#DRIVEREF}&quot; is in Use</name>
                                    <priority>HIGH</priority>
                                    <description>Check the Raid array - hot spare drive is used</description>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.hotspare</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } );     // all letters to Capital ones
   json_data = json_data.replace(/&quot;:/g,'}&quot;:' );              // making an array
   json_data = json_data.replace(/,&quot;(?=[A-Z])/g, ',&quot;{#');    // making an array 
   json_data = json_data.replace(/{&quot;(?=[A-Z])/g, '{&quot;{#');    // making an array
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Pools</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.pools.discovery</key>
                    <delay>0</delay>
                    <description>Pools information</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Pool &quot;{#LABEL}&quot;  Reserved Drives</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.system.config.pools.name.[{$SYSTEM_ID},{#LABEL},{#RESERVEDDRIVECOUNT}]</key>
                            <delay>0</delay>
                            <applications>
                                <application>
                                    <name>Storage Pools</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;label&quot;:&quot;{#LABEL}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;reservedDriveCount&quot;:&quot;)(.*?)(?=\&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.system.config.[{$SYSTEM_ID}]</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.system.config.[{$SYSTEM_ID}]</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$..pools</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } ); // all letters to Capital ones
   json_data = json_data.replace(/&quot;(?=[A-Z])/g,'&quot;{#');                                     // making an array
   json_data = json_data.replace(/&quot;(?=:)/g,'}&quot;' );                                         // making an array
   json_data = json_data.replace(/\[(?=\[)/g,'' );                                         // making an array
   json_data = json_data.replace(/(\])(?!.*\1)/g,'' );                                     // making an array
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Volume Groups</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.volumegroups.discovery</key>
                    <delay>0</delay>
                    <description>Volume Groups Information</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № {$SYSTEM_ID} Volume Group &quot;{#LABEL}&quot;  Raid Level</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.system.config.volumegroups.name.[{$SYSTEM_ID},{#LABEL},{#RAIDLEVEL}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Raid Level</description>
                            <applications>
                                <application>
                                    <name>Storage Volume Groups</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;label&quot;:&quot;{#LABEL}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;raidLevel&quot;:&quot;)(.*?)(?=\&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.system.config.[{$SYSTEM_ID}]</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.system.config.[{$SYSTEM_ID}]</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$..volumeGroups</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } ); // all letters to Capital ones
   json_data = json_data.replace(/&quot;(?=[A-Z])/g,'&quot;{#');                                     // making an array
   json_data = json_data.replace(/&quot;(?=:)/g,'}&quot;' );                                         // making an array
   json_data = json_data.replace(/\[(?=\[)/g,'' );                                         // making an array
   json_data = json_data.replace(/(\])(?!.*\1)/g,'' );                                     // making an array
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <name>Storage Volumes</name>
                    <type>DEPENDENT</type>
                    <key>santricity.storage.systems.id.volumes.discovery</key>
                    <delay>0</delay>
                    <description>Volumes Information</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume Group &quot;{#VOLUMEGROUPLABEL}&quot; Volume &quot;{#LABEL}&quot;  Controller Owner</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.system.config.volumes.name.[{$SYSTEM_ID},{#LABEL},{#OWNINGCONTROLLER}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Controller Owner of the volume</description>
                            <applications>
                                <application>
                                    <name>Storage Volumes</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;label&quot;:&quot;{#LABEL}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;owningController&quot;:&quot;)(.*?)(?=\&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.system.config.[{$SYSTEM_ID}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume Group &quot;{#VOLUMEGROUPLABEL}&quot; Volume &quot;{#LABEL}&quot;  Read Cache Enabled</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.system.config.volumes.name.[{$SYSTEM_ID},{#LABEL},{#READCACHEENABLED}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Indicates whether read caching is enabled for the volume</description>
                            <applications>
                                <application>
                                    <name>Storage Volumes</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;label&quot;:&quot;{#LABEL}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;readCacheEnabled&quot;:)\w+</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.system.config.[{$SYSTEM_ID}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume Group &quot;{#VOLUMEGROUPLABEL}&quot; Volume &quot;{#LABEL}&quot;  Write Cache Enabled</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.system.config.volumes.name.[{$SYSTEM_ID},{#LABEL},{#WRITECACHEENABLED}]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Indicates whether write-back caching is enabled for the volume</description>
                            <applications>
                                <application>
                                    <name>Storage Volumes</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;label&quot;:&quot;{#LABEL}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;writeCacheEnabled&quot;:)\w+</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.system.config.[{$SYSTEM_ID}]</key>
                            </master_item>
                        </item_prototype>
                        <item_prototype>
                            <name>Storage Systems ID № &quot;{$SYSTEM_ID}&quot; Volume Group &quot;{#VOLUMEGROUPLABEL}&quot; Volume &quot;{#LABEL}&quot; Size</name>
                            <type>DEPENDENT</type>
                            <key>santricity.storage.systems.id.system.config.volumes.name.[{$SYSTEM_ID},{#LABEL}]</key>
                            <delay>0</delay>
                            <units>B</units>
                            <description>Volume Size in bytes</description>
                            <applications>
                                <application>
                                    <name>Storage Volumes</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;label&quot;:&quot;{#LABEL}&quot;).*</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>REGEX</type>
                                    <parameters>
                                        <parameter>(?&lt;=&quot;capacity&quot;:&quot;)(.*?)(?=\&quot;)</parameter>
                                        <parameter>\0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>santricity.storage.systems.id.system.config.[{$SYSTEM_ID}]</key>
                            </master_item>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>santricity.storage.systems.id.system.config.[{$SYSTEM_ID}]</key>
                    </master_item>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$..volumes</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>   json_data = value
   json_data = json_data.replace(/&quot;([^&quot;]*)&quot;:/g, function(v) { return v.toUpperCase(); } );   // all letters to Capital ones
   json_data = json_data.replace(/&quot;(?=[A-Z])/g,'&quot;{#');                                       // making an array 
   json_data = json_data.replace(/&quot;(?=:)/g,'}&quot;' );                                           // making an array 
   json_data = json_data.replace(/\[(?=\[)/g,'' );                                           // making an array 
   json_data = json_data.replace(/(\])(?!.*\1)/g,'' );                                       // making an array 
   return(json_data);</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <httptests>
                <httptest>
                    <name>Web Api Interface Page Check</name>
                    <application>
                        <name>Zabbix raw items</name>
                    </application>
                    <authentication>BASIC</authentication>
                    <http_user>{$SANTRICITY.USERNAME}</http_user>
                    <http_password>{$SANTRICITY.PASSWORD}</http_password>
                    <steps>
                        <step>
                            <name>Web Api Interface Page</name>
                            <url>{$SANTRICITY.SCHEME}://{HOST.DNS}</url>
                            <status_codes>200</status_codes>
                        </step>
                    </steps>
                </httptest>
            </httptests>
            <macros>
                <macro>
                    <macro>{$HIGH_CPU_AVG_UTILIZATION_CONTROLLER}</macro>
                    <value>80</value>
                    <description>High Threshold of Avg CPU % Utilization for Controller</description>
                </macro>
                <macro>
                    <macro>{$HIGH_CPU_MAX_UTILIZATION_CONTROLLER}</macro>
                    <value>90</value>
                    <description>High Threshold of Max CPU % Utilization of Controller</description>
                </macro>
                <macro>
                    <macro>{$HIGH_CPU_MAX_UTILIZATION_SYSTEM}</macro>
                    <value>90</value>
                    <description>High Threshold of Max CPU % Utilization of system</description>
                </macro>
                <macro>
                    <macro>{$HIGH_SPARE_BLOCKS_REMAINING_PERCENT}</macro>
                    <value>90</value>
                    <description>High threshold of Spare Blocks Remaining Percent last</description>
                </macro>
                <macro>
                    <macro>{$SANTRICITY.PASSWORD}</macro>
                    <description>Password for USER (for &quot;monitor&quot; user by default)</description>
                </macro>
                <macro>
                    <macro>{$SANTRICITY.SCHEME}</macro>
                    <value>HTTPS</value>
                    <description>HTTP or HTTPS (HTTPS by default)</description>
                </macro>
                <macro>
                    <macro>{$SANTRICITY.USERNAME}</macro>
                    <value>monitor</value>
                    <description>Login for USER (&quot;monitor&quot; by default)</description>
                </macro>
                <macro>
                    <macro>{$SYSTEM_ID}</macro>
                    <value>1</value>
                    <description>Default system identificator. Usually only one(first) exists. See template description</description>
                </macro>
                <macro>
                    <macro>{$TEMP_DRIVE_HIGH}</macro>
                    <value>60</value>
                    <description>High threshold of drive temperature in Celsius - you can use macros  {#REFERENCETEMPINCELSIUS} instead to get reference temperature of a drive</description>
                </macro>
                <macro>
                    <macro>{$TEMP_DRIVE_WARN}</macro>
                    <value>45</value>
                    <description>Warning threshold of drive temperature in Celsius</description>
                </macro>
                <macro>
                    <macro>{$WARN_CPU_AVG_UTILIZATION_CONTROLLER}</macro>
                    <value>75</value>
                    <description>Warn Threshold of Avg CPU % Utilization for Controller</description>
                </macro>
                <macro>
                    <macro>{$WARN_CPU_MAX_UTILIZATION_CONTROLLER}</macro>
                    <value>75</value>
                    <description>Warn Threshold of Max CPU % Utilization of Controller</description>
                </macro>
                <macro>
                    <macro>{$WARN_CPU_MAX_UTILIZATION_SYSTEM}</macro>
                    <value>75</value>
                    <description>Warn Threshold of Max CPU % Utilization of system</description>
                </macro>
            </macros>
        </template>
    </templates>
    <triggers>
        <trigger>
            <expression>{zbx_netapp_santricity_web_api:web.test.fail[Web Api Interface Page Check].sum(#3)}&gt;=3</expression>
            <recovery_mode>RECOVERY_EXPRESSION</recovery_mode>
            <recovery_expression>{zbx_netapp_santricity_web_api:web.test.fail[Web Api Interface Page Check].sum(#6)}=0</recovery_expression>
            <name>Cannot Connect to Web API {HOST.DNS}</name>
            <priority>HIGH</priority>
        </trigger>
    </triggers>
</zabbix_export>
